((window,document)=>{"use strict";XF.samCoreLoaded=!0;const viewedAds=XF.Cookie.get("sam_viewed")?JSON.parse(XF.Cookie.get("sam_viewed")):{};var isOverAd=null;function isScrolledIntoView(elem){var elemTop;if(elem)return elemTop=(elem=elem.getBoundingClientRect()).top,elem=elem.bottom,0<=elemTop&&elem<=window.innerHeight}function sendGaEvent(data,type){gtag("event",type,{event_category:"Ads",event_label:data.name+" | "+data.type+" | "+data.position})}function getComputedStyle(element){return window.getComputedStyle(element).display}XF.on(window,"scroll",()=>{var currentScroll=window.scrollY;0}),window.addEventListener("DOMContentLoaded",()=>{var impressions=[];document.querySelectorAll("script[data-id][data-position]").forEach(item=>{var id=item.dataset.id,item=item.dataset.position;impressions.push([id,item])}),"impression"==XF.samViewCountMethod?(document.querySelectorAll(XF.samItem+"[data-id][data-cv]").forEach(item=>{var id=item.dataset.id,item=(item.hasAttribute("data-position")?item:item.closest("div[data-position]")).dataset.position;impressions.push([id,item])}),setTimeout(()=>{for(const id in XF.samBgAds)impressions.push([XF.samBgAds[id],"javascript"]);impressions.length&&XF.ajax("POST",XF.canonicalizeUrl("index.php?sam-item/track-impressions"),{impressions:impressions},data=>{if(void 0!==data.ga&&void 0!==window.gtag)for(const i in data.ga)sendGaEvent(data.ga[i],"ad_impression")},{skipDefault:!0,global:!1})},2e3)):setTimeout(()=>{impressions.length&&XF.ajax("POST",XF.canonicalizeUrl("index.php?sam-item/track-impressions"),{impressions:impressions},data=>{if(void 0!==data.ga&&void 0!==window.gtag)for(const i in data.ga)sendGaEvent(data.ga[i],"ad_impression")},{skipDefault:!0,global:!1})},2e3);const chatbar=document.getElementById("siropuChatBar");chatbar&&document.querySelectorAll('div[data-position="footer_fixed"]').forEach(item=>{item.style.bottom=chatbar.innerHeight+5});var affUrl=document.querySelectorAll(XF.samItem+"[data-affiliate-url]"),affUrl=(affUrl&&affUrl.forEach(item=>{XF.on(item,"mousedown",e=>{e.preventDefault(),1!=e.which&&2!=e.which||(window.open(item.dataset.affiliateUrl,"_blank"),XF.trigger(item,"adClick"),item.dataset.ga&&XF.trigger(item,"sam-ga"))}),XF.on(item,"mouseover",e=>{var nonAffUrl=item.dataset.nonAffiliateUrl;nonAffUrl&&item.setAttribute("href",nonAffUrl)}),XF.on(item,"contextmenu",e=>{item.setAttribute("href",item.dataset.affiliateUrl),item.setAttribute("data-non-affiliate-url",item.getAttribute("href"))})}),document.querySelectorAll(XF.samItem+" iframe, "+XF.samItem+"video"));function getWidthValueFromStyle(style){style=style.match(/[^-]?width:\s?([\d]+)px/i);return style?style[1]:""}function makeUnitsResponsive(){document.querySelectorAll(".samCustomSize").forEach(item=>{var parent=item.parentNode,isResponsive=item.classList.contains("samResponsive"),unitStyle=(item.classList.contains("samCarousel"),item.getAttribute("style"));let unitWidth=0;unitStyle?unitWidth=getWidthValueFromStyle(unitStyle):item.querySelectorAll(XF.samItem+"[style]").forEach(itemStyle=>{if(unitWidth=getWidthValueFromStyle(itemStyle.getAttribute("style")))return!1});unitStyle=unitWidth>=parent.innerWidth;unitStyle&&!isResponsive?item.classList.add("samResponsive"):!unitStyle&&isResponsive&&item.classList.remove("samResponsive")})}affUrl&&affUrl.forEach(item=>{XF.on(item,"mouseover",()=>{isOverAd=item.closest(XF.samItem)}),XF.on(item,"mouseout",()=>{isOverAd=null})}),XF.on(window,"blur",()=>{isOverAd&&XF.trigger(isOverAd,"click")}),XF.on(window,"focus",()=>{isOverAd=null}),XF.on(window,"resize",()=>{makeUnitsResponsive()}),makeUnitsResponsive()}),XF.SAMUnit=XF.Element.newHandler({options:{position:""},init(){const unit=this.target;if(unit.classList.contains("samCarousel")&&!unit.classList.contains("samCustomSize")){var carouselOptions=unit.parentNode.dataset.options;if(void 0===carouselOptions.slidesPerView){let imgSizes=[];carouselOptions=unit.querySelectorAll(XF.samItem+" img[data-src]"),carouselOptions=(carouselOptions&&carouselOptions.forEach(item=>{XF.on(item,"load",()=>{imgSizes.push(item.innerWidth)})}),unit.querySelectorAll(XF.samItem+" img:not([data-src])"));carouselOptions&&carouselOptions.forEach(item=>{imgSizes.push(item.innerWidth)}),setTimeout(()=>{var maxSize=Math.max.apply(Math,imgSizes);if(maxSize){maxSize=unit.parentNode.innerWidth-maxSize;if(maxSize){var centerVal=maxSize/2-25;let leftVal=0,rightVal=0;rightVal=unit.classList.contains("samAlignCenter")?leftVal=centerVal:unit.classList.contains("samAlignRight")?(leftVal=maxSize,0):(leftVal=0,maxSize),unit.parentNode.closest(".swiper-button-prev").style.left=leftVal-5,unit.parentNode.closest(".swiper-button-next").style.right=rightVal-5}}},1e3)}}}}),XF.SAMItem=XF.Element.newHandler({options:{id:0,ha:0,da:0,df:!1,cc:!1,cv:!1,ll:!1,rf:0},refreshInterval:!1,init(){const ad=this.target;var link;this.options.cv&&XF.on(ad,"adView",this.trackView.bind(this)),this.options.cc&&((link=ad.querySelector(":scope > a"))?XF.on(link,"click adClick",this.trackClick.bind(this)):XF.on(ad,"click adClick",this.trackClick.bind(this))),this.options.df&&XF.on(ad,"adJsView",this.trackJsView.bind(this)),XF.on(ad,"adViewCarousel",()=>{isScrolledIntoView(ad.parentNode)&&XF.trigger(ad,XF.customEvent("adView",{visible:!0}))}),XF.on(window,"scroll",()=>{var unit=ad.parentNode;isScrolledIntoView(unit)&&(this.options.da?this.initDelayDisplay():unit.classList.contains("samCarousel")||XF.trigger(ad,"adView"),this.options.ha&&this.initDelayHide(),this.options.df&&XF.trigger(ad,"adJsView"),this.options.ll)&&!ad.dataset.loading&&this.loadAd()}),XF.trigger(window,"scroll")},trackView(e){var ad,position_id;"view"!=XF.samViewCountMethod||(ad=this.target,position_id=this.getPositionId(),ad.dataset.viewed)||"none"==getComputedStyle(ad)||ad.closest(".samCarousel")&&!e.visible||(XF.ajax("POST",XF.canonicalizeUrl("index.php?sam-item/"+this.options.id+"/track-view"),{position_id:position_id},data=>{void 0!==data.ga&&void 0!==window.gtag&&sendGaEvent(data.ga,"ad_impression")},{skipDefault:!0,global:!1}),"javascript"==position_id?(e=document.querySelectorAll(".samBackgroundItem"))&&e.forEach(item=>{item.dataset.viewed=!0}):ad.dataset.viewed=!0)},trackClick(e){const ad=this.target,position_id=this.getPositionId();var link="javascript"==position_id?ad:ad.querySelector("a");let imageUrl="";link&&link.hasAttribute("data-multiple")&&((imageUrl=link.querySelector("img").getAttribute("src"))||(link=ad.querySelector(".samBackground").style.backgroundImage,imageUrl=link.replace("url(","").replace(")","").replace(/\"/gi,""))),ad.dataset.clicked||XF.ajax("POST",XF.canonicalizeUrl("index.php?sam-item/"+this.options.id+"/track-click"),{position_id:position_id,image_url:imageUrl,page_url:window.location!=window.parent.location?document.referrer:document.location.href},data=>{"javascript"==position_id?ad.querySelector(".samBackgroundItem").dataset.clicked=!0:ad.dataset.clicked=!0,void 0!==data.ga&&void 0!==window.gtag&&sendGaEvent(data.ga,"ad_click")},{skipDefault:!0,global:!1})},trackJsView(){viewedAds[this.options.id]=XF.samServerTime,XF.Cookie.set("sam_viewed",JSON.stringify(viewedAds))},initDelayDisplay(){const ad=this.target;"none"!=getComputedStyle(ad)||ad.dataset.daInit||(ad.dataset.daInit=!0,setTimeout(()=>{ad.style.display="block",XF.trigger(ad,"adView"),ad.removeAttribute("data-da-init")},1e3*this.options.da))},initDelayHide(){const ad=this.target,unit=ad.parentNode;ad.dataset.haInit||(ad.dataset.haInit=!0,setTimeout(()=>{ad.style.display="none",ad.removeAttribute("data-ha-init"),setTimeout(()=>{var ads=unit.querySelectorAll(XF.samItem);if(ads){let activeAdCount=0;ads.forEach(item=>{"none"!=getComputedStyle(item)&&activeAdCount++}),activeAdCount||unit.remove()}},500)},1e3*(this.options.da+this.options.ha)))},loadAd(refresh){const ad=this.target;var position_id=this.getPositionId();ad.dataset.loading=!0,XF.ajax("GET",XF.canonicalizeUrl("index.php?sam-item/"+this.options.id+"/load"),{position_id:position_id},data=>{var important;data.ad&&(important=ad.querySelector(".samBackup, .samCloseButton, .samSupportUs"),ad.innerHTML=data.ad,important&&(data=important.parentElement.removeChild(important),ad.append(data)),refresh||(ad.classList.remove("samLazyLoading"),XF.trigger(document,"samInitAdblockDetection")),this.options.rf)&&!this.refreshInterval&&(this.refreshInterval=setInterval(()=>{this.loadAd(!0)},this.options.rf))},{skipDefault:!0,global:!1})},getPositionId(){var position=this.target.dataset.position;switch(position){case"content_thread":case"content_conversation":case"content_profile":case"javascript":return position;default:return this.target.closest("div[data-position]").dataset.position}}}),XF.SAMMonitor=XF.Element.newHandler({options:{id:0,cl:1},clickCount:0,init(){XF.on(this.target,"click",this.monitorClick.bind(this))},monitorClick(){this.clickCount++,this.clickCount==this.options.cl&&this.remove(),XF.ajax("POST",XF.canonicalizeUrl("index.php?sam-item/"+this.options.id+"/monitor-click"),{page_url:window.location!=window.parent.location?document.referrer:document.location.href},data=>{data.blocked&&this.remove()},{skipDefault:!0,global:!1})},remove(){var ad=this.target,unit=ad.parentNode;ad.remove(),unit.querySelectorAll(XF.samItem).length||unit.remove()}}),XF.SAMGa=XF.Element.newHandler({options:{ga:{}},init(){const ad=this.target;void 0!==window.gtag&&("impression"==XF.samViewCountMethod?sendGaEvent(this.options.ga,"ad_impression"):XF.on(window,"scroll",()=>{!ad.dataset.viewed&&isScrolledIntoView(ad.parentNode)&&(sendGaEvent(this.options.ga,"ad_impression"),this.markAsViewed())}),XF.on(ad,"click sam-ga",()=>{ad.dataset.clicked||(sendGaEvent(this.options.ga,"ad_click"),this.markAsClicked())}))},markAsViewed(){this.target.dataset.viewed=!0},markAsClicked(){this.target.dataset.clicked=!0}}),XF.SAMClose=XF.Event.newHandler({eventNameSpace:"SAMClose",options:{},init(){},click(){var unit=this.target.closest("div[data-position]"),position=unit.dataset.position;unit.style.display="none","over_bb_code_video_attachment"==position||"media_view_video_container"==position?((unit=unit.closest(".bbMediaWrapper-inner")).querySelector(".samVideoOverlay").style.display="none",unit.querySelector("video").play()):"media_view_video_embed_container"==position&&(document.querySelector(".samVideoOverlay").style.display="none")}}),XF.SAMLazy=XF.Element.newHandler({options:{src:"",carousel:!1},init(){XF.on(this.target,"loadImage",this.loadImage.bind(this)),XF.on(window,"scroll",()=>{"none"==getComputedStyle(this.target)&&isScrolledIntoView(this.target.closest("div[data-position]"))&&this.loadImage()}),XF.trigger(window,"scroll")},loadImage(){this.target.setAttribute("src",this.options.src),this.target.style.display="block",this.target.removeAttribute("data-src")}}),XF.Element.register("sam-unit","XF.SAMUnit"),XF.Element.register("sam-item","XF.SAMItem"),XF.Element.register("sam-monitor","XF.SAMMonitor"),XF.Element.register("sam-ga","XF.SAMGa"),XF.Element.register("sam-lazy","XF.SAMLazy"),XF.Event.register("click","sam-close","XF.SAMClose")})(window,document);